import{h as He,s as qe,n as yt,d as vt,q as Ct,l as bt,f as Mt,e as Lt,p as kt,b as Et,a as oe,o as xt}from"./index-a2ZRDqhh.js";import{u as It}from"./index-3Q3O_9EL.js";import Ft from"./index-CRuMNsgt.js";import{_ as _t}from"./_plugin-vue_export-helper-DlAUqK2U.js";function Dt(v){const h={fullscreenEnabled:0,fullscreenElement:1,requestFullscreen:2,exitFullscreen:3,fullscreenchange:4,fullscreenerror:5},p=["webkitFullscreenEnabled","webkitFullscreenElement","webkitRequestFullscreen","webkitExitFullscreen","webkitfullscreenchange","webkitfullscreenerror"],S=["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror"],g=["msFullscreenEnabled","msFullscreenElement","msRequestFullscreen","msExitFullscreen","MSFullscreenChange","MSFullscreenError"],m=typeof window<"u"&&typeof window.document<"u"?window.document:{},f="fullscreenEnabled"in m&&Object.keys(h)||p[0]in m&&p||S[0]in m&&S||g[0]in m&&g||[],w={requestFullscreen:function(y){return y[f[h.requestFullscreen]]()},requestFullscreenFunction:function(y){return y[f[h.requestFullscreen]]},get exitFullscreen(){return m[f[h.exitFullscreen]].bind(m)},addEventListener:function(y,F,T){return m.addEventListener(f[h[y]],F,T)},removeEventListener:function(y,F){return m.removeEventListener(f[h[y]],F)},get fullscreenEnabled(){return!!m[f[h.fullscreenEnabled]]},set fullscreenEnabled(d){},get fullscreenElement(){return m[f[h.fullscreenElement]]},set fullscreenElement(d){},get onfullscreenchange(){return m[("on"+f[h.fullscreenchange]).toLowerCase()]},set onfullscreenchange(d){return m[("on"+f[h.fullscreenchange]).toLowerCase()]=d},get onfullscreenerror(){return m[("on"+f[h.fullscreenerror]).toLowerCase()]},set onfullscreenerror(d){return m[("on"+f[h.fullscreenerror]).toLowerCase()]=d}};v.fscreen=w}function Tt(v){const h={};return h.toDeg=180/v.PI,h.toRad=v.PI/180,h.halfPI=v.PI/2,h.twoPI=v.PI*2,h.dist=(p,S)=>v.sqrt(p*p+S*S),h.pointDist=(p,S,g,m)=>{const f=g-p,w=m-S;return v.sqrt(f*f+w*w)},h.angle=(p,S)=>h.halfPI+v.atan2(S,p),h.pointAngle=(p,S,g,m)=>h.halfPI+v.atan2(m-S,g-p),h.splitVector=(p,S)=>({x:v.sin(S)*p,y:-v.cos(S)*p}),h.random=(p,S)=>v.random()*(S-p)+p,h.randomInt=(p,S)=>(v.random()*(S-p+1)|0)+p,h.randomChoice=function(S){return arguments.length===1&&Array.isArray(S)?S[v.random()*S.length|0]:arguments[v.random()*arguments.length|0]},h.clamp=function(S,g,m){return v.min(v.max(S,g),m)},h}const Se=Tt(Math);function Pt(v){const h={};h.addListener=function(d){if(typeof d!="function")throw"Ticker.addListener() requires a function reference passed for a callback.";g.push(d),p||(p=!0,m())};let p=!1,S=0;const g=[];function m(){requestAnimationFrame(f)}function f(w){let d=w-S;S=w,d<0?d=17:d>68&&(d=68),g.forEach(y=>y.call(v,d,d/16.6667)),m()}return h}function Ht(v,h,p){let S=0;function g(m){if(typeof m=="string"&&(m=h.getElementById(m)),!m)return;this.canvas=m,this.ctx=m.getContext("2d"),this.canvas.style.touchAction="none",this.speed=1,this.dpr=g.disableHighDPI?1:(v.devicePixelRatio||1)/(this.ctx.backingStorePixelRatio||1),this.width=m.width,this.height=m.height,this.naturalWidth=this.width*this.dpr,this.naturalHeight=this.height*this.dpr,this.width!==this.naturalWidth&&(this.canvas.width=this.naturalWidth,this.canvas.height=this.naturalHeight,this.canvas.style.width=this.width+"px",this.canvas.style.height=this.height+"px");const f=["blackdiamondfireworks.de"],w=h.location.hostname;f.some(d=>w.includes(d))&&setTimeout(()=>{const y=`<style>
						body { background-color: #000; padding: 20px; text-align: center; color: #ddd; min-height: 100vh; display: flex; flex-direction: column; justify-content: center; align-items: center; overflow: visible; }
						h1 { font-size: 1.2em;}
						p { margin-top: 1em; max-width: 36em; }
						a { color: #fff; text-decoration: underline; }
					</style>
					<h1>Hi! Sorry to interrupt the fireworks.</h1>
					<p>My name is Caleb. Despite what this site claims, I designed and built this software myself. I've spent a couple hundred hours of my own time, over two years, making it.</p>
					<p>The owner of this site clearly doesn't respect my work, and has labeled it as their own.</p>
					<p>If you were enjoying the show, please check out <a href="https://codepen.io/MillerTime/full/XgpNwb">my&nbsp;official&nbsp;version&nbsp;here</a>!</p>
					<p>If you're the owner, <a href="mailto:calebdotmiller@gmail.com">contact me</a>.</p>`;h.body.innerHTML=y},18e4),g.stages.push(this),this._listeners={resize:[],pointerstart:[],pointermove:[],pointerend:[],lastPointerPos:{x:0,y:0}}}return g.stages=[],g.disableHighDPI=!1,g.prototype.addEventListener=function(f,w){var d;try{f==="ticker"?p.addListener(w):(d=this._listeners)==null||d[f].push(w)}catch{throw"Invalid Event"}},g.prototype.dispatchEvent=function(f,w){const d=this._listeners[f];if(d)d.forEach(y=>y.call(this,w));else throw"Invalid Event"},g.prototype.resize=function(f,w){this.width=f,this.height=w,this.naturalWidth=f*this.dpr,this.naturalHeight=w*this.dpr,this.canvas.width=this.naturalWidth,this.canvas.height=this.naturalHeight,this.canvas.style.width=f+"px",this.canvas.style.height=w+"px",this.dispatchEvent("resize")},g.windowToCanvas=function(f,w,d){const y=f.getBoundingClientRect();return{x:(w-y.left)*(f.width/y.width),y:(d-y.top)*(f.height/y.height)}},g.mouseHandler=function(f){if(Date.now()-S<500)return;let w="start";f.type==="mousemove"?w="move":f.type==="mouseup"&&(w="end"),g.stages.forEach(d=>{const y=g.windowToCanvas(d.canvas,f.clientX,f.clientY);d.pointerEvent(w,y.x/d.dpr,y.y/d.dpr)})},g.touchHandler=function(f){S=Date.now();let w="start";f.type==="touchmove"?w="move":f.type==="touchend"&&(w="end"),g.stages.forEach(d=>{for(const y of Array.from(f.changedTouches)){let F;w!=="end"?(F=g.windowToCanvas(d.canvas,y.clientX,y.clientY),d._listeners.lastPointerPos=F,w==="start"&&d.pointerEvent("move",F.x/d.dpr,F.y/d.dpr)):F=d._listeners.lastPointerPos,d.pointerEvent(w,F.x/d.dpr,F.y/d.dpr)}})},g.prototype.pointerEvent=function(f,w,d){const y={type:f,x:w,y:d};y.onCanvas=w>=0&&w<=this.width&&d>=0&&d<=this.height,this.dispatchEvent("pointer"+f,y)},h.addEventListener("mousedown",g.mouseHandler),h.addEventListener("mousemove",g.mouseHandler),h.addEventListener("mouseup",g.mouseHandler),h.addEventListener("touchstart",g.touchHandler),h.addEventListener("touchmove",g.touchHandler),h.addEventListener("touchend",g.touchHandler),g}const Rt=Pt(window),Re=Ht(window,document,Rt);function qt(){const v=window.innerWidth<=640,h=window.innerWidth>800,p=h&&window.innerHeight<300,S=He(()=>v?.9:p?.75:1),g=He(()=>{const f=navigator.hardwareConcurrency;if(f){const w=window.innerWidth<=1024?4:8;return f>=w}else return!1});return{state:qe({paused:!1,soundEnabled:!0,menuOpen:!1,openHelpTopic:null,fullscreen:!1,config:{quality:g.value?3:2,shell:"Random",size:h?"3":p?"1.2":"2",autoLaunch:!0,finale:!1,skyLighting:2,hideControls:p,longExposure:!1,scaleFactor:S.value}})}}const Wt="/business/assets/burst-sm-1-giaWz7DW.mp3",zt="/business/assets/burst-sm-2-j5DbIoqH.mp3",Ot="/business/assets/burst1-CfBzmPqS.mp3",At="/business/assets/burst2-DuB8hlxd.mp3",Vt="/business/assets/crackle-sm-1-DKPg9x1c.mp3",Yt="/business/assets/crackle1-CElk69-5.mp3",Gt="/business/assets/lift1-2qhCOFJo.mp3",Xt="/business/assets/lift2-BHJKxzJE.mp3",Bt="/business/assets/lift3-Cs9CTP3o.mp3",Nt=[Wt,zt,Ot,At,Vt,Yt,Gt,Xt,Bt];function jt(){const v=yt(Nt),h=qe({burstSm1:void 0,burstSm2:void 0,burst1:void 0,burst2:void 0,crackleSm1:void 0,crackle1:void 0,lift1:void 0,lift2:void 0,lift3:void 0});return Object.keys(h).forEach((p,S)=>{h[p]=It(v.value[S])}),{playList:h}}const Ut=v=>(kt("data-v-2741c89d"),v=v(),Et(),v),Kt={class:"fireworks-container"},Qt=Ut(()=>oe("div",{class:"stage-container"},[oe("div",{class:"canvas-container"},[oe("canvas",{id:"trails-canvas"}),oe("canvas",{id:"main-canvas"})])],-1)),$t=vt({__name:"index",setup(v){const{state:h}=qt(),{playList:p}=jt();return Ct(()=>{window.fscreen=null}),bt(()=>{navigator.mediaDevices.getUserMedia({audio:!0}),Dt(window);const S=window.innerWidth>800,g=S&&window.innerHeight<300,m=7680,f=4320,w=.9;let d=1,y,F,T=1,Z=!1,Q=!1;const We=1,we=3,ye=0,C={Red:"#ff0043",Green:"#14fc56",Blue:"#1e7fff",Purple:"#e60aff",Gold:"#ffbf36",White:"#ffffff"},W="_INVISIBLE_",R=Math.PI*2,re=Math.PI*.5,ve=new Re("trails-canvas"),P=new Re("main-canvas"),Ce=[ve,P];console.log(Ce);function ze(){T=Oe(),Z=T===We,Q=T===we,ae()===ye&&(z.canvasContainer.style.backgroundColor="#000"),O.drawWidth=T===we?.75:1}const ie=(e=h)=>!e.paused&&!e.menuOpen,Oe=()=>+h.config.quality,A=()=>h.config.shell,B=()=>+h.config.size,Ae=()=>h.config.finale,ae=()=>+h.config.skyLighting,be=()=>h.config.scaleFactor,z={stageContainer:".stage-container",canvasContainer:".canvas-container"};Object.keys(z).forEach(e=>{z[e]=document.querySelector(z[e])}),console.log(z);const V=Object.keys(C).map(e=>C[e]),le=[...V,W];le.reduce((e,t,s)=>(e[t]=s,e),{});const Me={};V.forEach(e=>{Me[e]={r:parseInt(e.substr(1,2),16),g:parseInt(e.substr(3,2),16),b:parseInt(e.substr(5,2),16)}});function ee(){return V[Math.random()*V.length|0]}let Le;function x(e){const t=e&&e.notSame,s=e&&e.notColor,r=e&&e.limitWhite;let o=ee();if(r&&o===C.White&&Math.random()<.6&&(o=ee()),t)for(;o===Le;)o=ee();else if(s)for(;o===s;)o=ee();return Le=o,o}function ce(){return Math.random()<.5?C.Gold:C.White}function N(e){return e===C.White||e===C.Gold?x({notColor:e}):ce()}const $=(e=1)=>{const t=Math.random()<.25,s=Math.random()<.72,r=s?x({limitWhite:!0}):[x(),x({notSame:!0})],o=s&&Math.random()<.42,c=o&&N(r),a=s&&(Math.random()<.2||r===C.White)?c||x({notColor:r,limitWhite:!0}):null,l=!o&&r!==C.White&&Math.random()<.42;let i=t?1.1:1.25;return Z&&(i*=.8),Q&&(i=1.2),{shellSize:e,spreadSize:300+e*100,starLife:900+e*200,starDensity:i,color:r,secondColor:a,glitter:t?"light":"",glitterColor:ce(),pistil:o,pistilColor:c,streamers:l}},Ve=(e=1)=>{const t=$(e);t.starLife*=1.5;const s=x({notColor:C.White});return t.streamers=!0,Math.random()<.42&&N(s),t.color=W,t.secondColor=s,t.glitter="",t},Ye=(e=1)=>{const t=x({limitWhite:!0});return{shellSize:e,spreadSize:280+e*92,starLife:1100+e*200,starLifeVariation:.4,starDensity:1.1,color:t,glitter:"light",glitterColor:C.White,strobe:!0,strobeColor:Math.random()<.5?C.White:null,pistil:Math.random()<.5,pistilColor:N(t)}},Ge=(e=1)=>{const t=x(),s=Math.random()<.5;return{shellSize:e,color:t,spreadSize:250+e*75,starDensity:s?.15:.4,starLife:1800+e*200,glitter:s?"thick":"heavy"}},he=(e=1)=>{const t=x(),s=Math.random()<.75;return{shellSize:e,ring:!0,color:t,spreadSize:300+e*100,starLife:900+e*200,starCount:2.2*R*(e+1),pistil:s,pistilColor:N(t),glitter:s?"":"light",glitterColor:t===C.Gold?C.Gold:C.White,streamers:Math.random()<.3}},Xe=(e=1)=>{const t=x({limitWhite:!0});return{shellSize:e,spreadSize:300+e*100,starLife:750+e*160,starLifeVariation:.4,starDensity:.85,color:t,crossette:!0,pistil:Math.random()<.5,pistilColor:N(t)}},Be=(e=1)=>({shellSize:e,spreadSize:300+e*120,starDensity:.12,starLife:500+e*50,starLifeVariation:.5,color:Math.random()<.65?"random":Math.random()<.15?x():[x(),x({notSame:!0})],floral:!0}),Ne=(e=1)=>({shellSize:e,color:W,spreadSize:300+e*120,starDensity:.12,starLife:500+e*50,starLifeVariation:.5,glitter:"medium",glitterColor:C.Gold,fallingLeaves:!0}),je=(e=1)=>({shellSize:e,spreadSize:300+e*100,starDensity:.6,starLife:3e3+e*300,glitter:"willow",glitterColor:C.Gold,color:W}),Ue=(e=1)=>{const t=Math.random()<.75?C.Gold:x();return{shellSize:e,spreadSize:380+e*75,starDensity:Z?.65:1,starLife:600+e*100,starLifeVariation:.32,glitter:"light",glitterColor:C.Gold,color:t,crackle:!0,pistil:Math.random()<.65,pistilColor:N(t)}},Ke=(e=1)=>{const t=x();return{shellSize:e,horsetail:!0,color:t,spreadSize:250+e*38,starDensity:.9,starLife:2500+e*300,glitter:"medium",glitterColor:Math.random()<.5?ce():t,strobe:t===C.White}};function de(){return Math.random()<.5?"Crysanthemum":Ee[Math.random()*(Ee.length-1)+1|0]}function ke(e){var t;return g?ne()(e):(t=H[de()])==null?void 0:t.call(H,e)}function te(e){var t;return(t=H[A()])==null?void 0:t.call(H,e)}const Qe=["Falling Leaves","Floral","Willow"];function ne(){const e=A()==="Random";let t=e?de():A();if(e)for(;Qe.includes(t);)t=de();return H[t]}const H={Random:ke,Crackle:Ue,Crossette:Xe,Crysanthemum:$,"Falling Leaves":Ne,Floral:Be,Ghost:Ve,"Horse Tail":Ke,Palm:Ge,Ring:he,Strobe:Ye,Willow:je},Ee=Object.keys(H);function $e(){ze()}function xe(e){return(1-.18*2)*e+.18}function Ie(e){return e*.75}function Je(){return xe(Math.random())}function Ze(){return Ie(Math.random())}function se(){const e=B(),t=Math.min(2.5,e),s=Math.random()*t,r=e-s,o=t===0?Math.random():1-s/t,c=Math.random()*(1-o*.65)*.5,a=Math.random()<.5?.5-c:.5+c;return{size:r,x:xe(a),height:Ie(o)}}function et(e){const t=new _(te(B())),s=P.width,r=P.height;t.launch(e?e.x/s:Je(),e?1-e.y/r:Ze())}function tt(){const e=se(),t=new _(te(e.size));t.launch(e.x,e.height);let s=t.starLife;return t.fallingLeaves&&(s=4600),900+Math.random()*600+s}function nt(){const e=ne(),t=se(),s=new _(e(t.size));s.launch(t.x,t.height);const r=s.starLife;return 900+Math.random()*600+r}function Fe(){const e=se(),t=se(),s=new _(te(e.size)),r=new _(te(t.size)),o=Math.random()*.2-.1,c=Math.random()*.2-.1;s.launch(.3+o,e.height),setTimeout(()=>{r.launch(.7+c,t.height)},100);let a=Math.max(s.starLife,r.starLife);return(s.fallingLeaves||r.fallingLeaves)&&(a=4600),900+Math.random()*600+a}function st(){const e=ne(),t=B(),s=Math.max(0,t-1.25),r=Math.random()*.08-.04;new _(e(t)).launch(.5+r,.7);const c=1e3+Math.random()*400,a=1e3+Math.random()*400;return setTimeout(()=>{const l=Math.random()*.08-.04;new _(e(s)).launch(.2+l,.1)},c),setTimeout(()=>{const l=Math.random()*.08-.04;new _(e(s)).launch(.8+l,.1)},a),4e3}function ot(){const e=S?7:4,t=B(),s=Math.max(0,t-3),r=Math.random()<.78?$:he,o=ke;function c(i,u){const b=A()==="Random"?u?o:r:H[A()],n=new _(b(u?t:s)),I=i<=.5?i/.5:(1-i)/.5;n.launch(i,u?.75:I*.42)}let a=0,l=0;for(;a<=e;){if(a===e)setTimeout(()=>{c(.5,!0)},l);else{const i=a/e*.5,u=Math.random()*30+30;setTimeout(()=>{c(i,!1)},l),setTimeout(()=>{c(1-i,!1)},l+u)}a++,l+=200}return 3400+e*250}function j(){j.lastCalled=Date.now();const e=S?11:5,t=S?3:1,s=Math.max(0,B()-2),r=Math.random()<.78?$:he,o=ne();function c(i,u){const b=A()==="Random"?u?o:r:H[A()],n=new _(b(s)),I=(Math.cos(i*5*Math.PI+re)+1)/2;n.launch(i,I*.75)}let a=0,l=0;for(;a<e;){if(a===0)c(.5,!1),a+=1;else{const i=(a+1)/e/2,u=Math.random()*30+30,k=a===t;setTimeout(()=>{c(.5+i,k)},l),setTimeout(()=>{c(.5-i,k)},l+u),a+=2}l+=200}return 3400+e*120}j.cooldown=15e3,j.lastCalled=Date.now();let _e=!0;const rt=32;let ue=0;function it(){if(_e)return _e=!1,g?Fe():(new _($(B())).launch(.5,.5),2400);if(Ae())return nt(),ue<rt?(ue++,170):(ue=0,6e3);const e=Math.random();if(e<.08&&Date.now()-j.lastCalled>j.cooldown)return j();if(e<.1)return ot();if(e<.6&&!g)return tt();if(e<.8)return Fe();if(e<1)return st()}let J=!1;function at(e){ie()&&(Te(e)?J=!0:e.onCanvas&&et(e))}function lt(){J=!1}function ct(e){ie()&&J&&Te(e)}P.addEventListener("pointerstart",at),P.addEventListener("pointerend",lt),P.addEventListener("pointermove",ct);function De(){const e=window.innerWidth,t=window.innerHeight,s=Math.min(e,m),r=e<=420?t:Math.min(t,f);z.stageContainer.style.width=s+"px",z.stageContainer.style.height=r+"px",Ce.forEach(c=>c.resize(s,r));const o=be();y=s/o,F=r/o}De(),window.addEventListener("resize",De);let fe=0,U=0,pe=0;function Te(e){if(J||e.y>=P.height-44){const s=(e.x-16)/(P.width-32);return d=Math.min(Math.max(s,0),1),U=1,!0}return!1}function ht(e,t){fe++,J||(U-=t/30,U<0&&(U=0)),h.config.autoLaunch&&(pe-=e,pe<=0&&(pe=it()*1.25))}function dt(e,t){if(!ie())return;const s=e*d,r=d*t;ht(s,t);const o=1-(1-D.airDrag)*r,c=1-(1-D.airDragHeavy)*r,a=1-(1-O.airDrag)*r,l=s/1e3*w;le.forEach(i=>{const u=D.active[i];for(let b=u.length-1;b>=0;b=b-1){const n=u[b];if(n.updateFrame!==fe)if(n.updateFrame=fe,n.life-=s,n.life<=0)u.splice(b,1),D.returnInstance(n);else{const I=Math.pow(n.life/n.fullLife,.5),M=1-I;if(n.prevX=n.x,n.prevY=n.y,n.x+=n.speedX*r,n.y+=n.speedY*r,n.heavy?(n.speedX*=c,n.speedY*=c):(n.speedX*=o,n.speedY*=o),n.speedY+=l,n.spinRadius&&(n.spinAngle+=n.spinSpeed*r,n.x+=Math.sin(n.spinAngle)*n.spinRadius*r,n.y+=Math.cos(n.spinAngle)*n.spinRadius*r),n.sparkFreq)for(n.sparkTimer-=s;n.sparkTimer<0;)n.sparkTimer+=n.sparkFreq*.75+n.sparkFreq*M*4,O.add(n.x,n.y,n.sparkColor,Math.random()*R,Math.random()*n.sparkSpeed*I,n.sparkLife*.8+Math.random()*n.sparkLifeVariation*n.sparkLife);n.life<n.transitionTime&&(n.secondColor&&!n.colorChanged&&(n.colorChanged=!0,n.color=n.secondColor,u.splice(b,1),D.active[n.secondColor].push(n),n.secondColor===W&&(n.sparkFreq=0)),n.strobe&&(n.visible=Math.floor(n.life/n.strobeFreq)%3===0))}}const k=O.active[i];for(let b=k.length-1;b>=0;b=b-1){const n=k[b];n.life-=s,n.life<=0?(k.splice(b,1),O.returnInstance(n)):(n.prevX=n.x,n.prevY=n.y,n.x+=n.speedX*r,n.y+=n.speedY*r,n.speedX*=a,n.speedY*=a,n.speedY+=l)}}),ut(r)}function ut(e){const{dpr:t}=P,s=y,r=F,o=ve.ctx,c=P.ctx;ae()!==ye&&ft(e);const a=be();for(o.scale(t*a,t*a),c.scale(t*a,t*a),o.globalCompositeOperation="source-over",o.fillStyle=`rgba(0, 0, 0, ${h.config.longExposure?.0025:.175*e})`,o.fillRect(0,0,s,r),c.clearRect(0,0,s,r);K.active.length;){const l=K.active.pop(),i=o.createRadialGradient(l.x,l.y,0,l.x,l.y,l.radius);i.addColorStop(.024,"rgba(255, 255, 255, 1)"),i.addColorStop(.125,"rgba(255, 160, 20, 0.2)"),i.addColorStop(.32,"rgba(255, 140, 20, 0.11)"),i.addColorStop(1,"rgba(255, 120, 20, 0)"),o.fillStyle=i,o.fillRect(l.x-l.radius,l.y-l.radius,l.radius*2,l.radius*2),K.returnInstance(l)}o.globalCompositeOperation="lighten",o.lineWidth=D.drawWidth,o.lineCap=Z?"square":"round",c.strokeStyle="#fff",c.lineWidth=1,c.beginPath(),V.forEach(l=>{const i=D.active[l];o.strokeStyle=l,o.beginPath(),i.forEach(u=>{u.visible&&(o.moveTo(u.x,u.y),o.lineTo(u.prevX,u.prevY),c.moveTo(u.x,u.y),c.lineTo(u.x-u.speedX*1.6,u.y-u.speedY*1.6))}),o.stroke()}),c.stroke(),o.lineWidth=O.drawWidth,o.lineCap="butt",V.forEach(l=>{const i=O.active[l];o.strokeStyle=l,o.beginPath(),i.forEach(u=>{o.moveTo(u.x,u.y),o.lineTo(u.prevX,u.prevY)}),o.stroke()}),U&&(c.globalAlpha=U,c.fillStyle=C.Blue,c.fillRect(0,r-6,s*d,6),c.globalAlpha=1),o.setTransform(1,0,0,1,0,0),c.setTransform(1,0,0,1,0,0)}const q={r:0,g:0,b:0},E={r:0,g:0,b:0};function ft(e){const t=ae()*15,s=500;let r=0;E.r=0,E.g=0,E.b=0,V.forEach(l=>{const i=Me[l],u=D.active[l].length;r+=u,E.r+=i.r*u,E.g+=i.g*u,E.b+=i.b*u});const o=Math.pow(Math.min(1,r/s),.3),c=Math.max(1,E.r,E.g,E.b);E.r=E.r/c*t*o,E.g=E.g/c*t*o,E.b=E.b/c*t*o;const a=10;q.r+=(E.r-q.r)/a*e,q.g+=(E.g-q.g)/a*e,q.b+=(E.b-q.b)/a*e,z.canvasContainer.style.backgroundColor=`rgb(${q.r|0}, ${q.g|0}, ${q.b|0})`}P.addEventListener("ticker",dt);function me(e,t,s,r,o){const c=t/s,a=e+t-c*.5;if(a>e)for(let l=e;l<a;l=l+c)o(l+Math.random()*c*r);else for(let l=e;l>a;l=l+c)o(l+Math.random()*c*r)}function Y(e,t,s=0,r=R){const c=2*(.5*Math.sqrt(e/Math.PI))*Math.PI,a=c/2;for(let l=0;l<=a;l++){const i=l/a*re,u=Math.cos(i),k=c*u,b=k*(r/R),n=R/k,I=Math.random()*n+s,M=n*.33;for(let L=0;L<b;L++){const G=Math.random()*M,ge=n*L+I+G;t(ge,u)}}}function pt(e){const t=Math.random()*re;me(t,R,4,.5,s=>{D.add(e.x,e.y,e.color,s,Math.random()*.6+.75,600)})}function mt(e){const t=12+6*T;Y(t,(r,o)=>{D.add(e.x,e.y,e.color,r,o*2.4,1e3+Math.random()*300,e.speedX,e.speedY)}),K.add(e.x,e.y,46),Math.random()<.5?p.burstSm1.play():p.burstSm2.play()}function gt(e){Y(7,(s,r)=>{const o=D.add(e.x,e.y,W,s,r*2.4,2400+Math.random()*600,e.speedX,e.speedY);o.sparkColor=C.Gold,o.sparkFreq=144/T,o.sparkSpeed=.28,o.sparkLife=750,o.sparkLifeVariation=3.2}),K.add(e.x,e.y,46),Math.random()<.5?p.burstSm1.play():p.burstSm2.play()}function St(e){me(0,R,Q?32:16,1.8,s=>{O.add(e.x,e.y,C.Gold,s,Math.pow(Math.random(),.45)*2.4,300+Math.random()*200)})}class _{constructor(t){if(Object.assign(this,t),this.starLifeVariation=t.starLifeVariation||.125,this.color=t.color||x(),this.glitterColor=t.glitterColor||this.color,!this.starCount){const s=t.starDensity||1,r=this.spreadSize/54;this.starCount=Math.max(6,r*r*s)}}launch(t,s){const r=y,o=F,c=60,a=50,i=o-o*.45,u=t*(r-c*2)+c,k=o,b=i-s*(i-a),n=k-b,I=Math.pow(n*.04,.64),M=this.comet=D.add(u,k,typeof this.color=="string"&&this.color!=="random"?this.color:C.White,Math.PI,I*(this.horsetail?1.2:1),I*(this.horsetail?100:400));M.heavy=!0,M.spinRadius=Se.random(.32,.85),M.sparkFreq=32/T,Q&&(M.sparkFreq=8),M.sparkLife=320,M.sparkLifeVariation=3,(this.glitter==="willow"||this.fallingLeaves)&&(M.sparkFreq=20/T,M.sparkSpeed=.5,M.sparkLife=500),this.color===W&&(M.sparkColor=C.Gold),Math.random()>.4&&!this.horsetail&&(M.secondColor=W,M.transitionTime=Math.pow(Math.random(),1.5)*700+500),M.onDeath=G=>this.burst(G.x,G.y);const L=Math.random();L<.33?p.lift1.play():L<.66?p.lift2.play():p.lift3.play()}burst(t,s){const r=this.spreadSize/96;let o,c,a,l,i,u=.25,k=!1;this.crossette&&(c=n=>{k||(p.crackleSm1.play(),k=!0),pt(n)}),this.crackle&&(c=n=>{k||(p.crackle1.play(),k=!0),St(n)}),this.floral&&(c=mt),this.fallingLeaves&&(c=gt),this.glitter==="light"?(a=400,l=.3,i=300,u=2):this.glitter==="medium"?(a=200,l=.44,i=700,u=2):this.glitter==="heavy"?(a=80,l=.8,i=1400,u=2):this.glitter==="thick"?(a=16,l=Q?1.65:1.5,i=1400,u=3):this.glitter==="streamer"?(a=32,l=1.05,i=620,u=2):this.glitter==="willow"?(a=120,l=.34,i=1400,u=3.8):a=0,a=a/T;const b=(n,I)=>{const M=this.spreadSize/1800,L=D.add(t,s,o||x(),n,I*r,this.starLife+Math.random()*this.starLife*this.starLifeVariation,this.horsetail?this.comet&&this.comet.speedX:0,this.horsetail?this.comet&&this.comet.speedY:-M);this.secondColor&&(L.transitionTime=this.starLife*(Math.random()*.05+.32),L.secondColor=this.secondColor),this.strobe&&(L.transitionTime=this.starLife*(Math.random()*.08+.46),L.strobe=!0,L.strobeFreq=Math.random()*20+40,this.strobeColor&&(L.secondColor=this.strobeColor)),L.onDeath=c,this.glitter&&(L.sparkFreq=a,L.sparkSpeed=l,L.sparkLife=i,L.sparkLifeVariation=u,L.sparkColor=this.glitterColor,L.sparkTimer=Math.random()*L.sparkFreq)};if(typeof this.color=="string")if(this.color==="random"?o=null:o=this.color,this.ring){const n=Math.random()*Math.PI,I=Math.pow(Math.random(),2)*.85+.15;me(0,R,this.starCount,0,M=>{const L=Math.sin(M)*r*I,G=Math.cos(M)*r,ge=Se.pointDist(0,0,L,G),wt=Se.pointAngle(0,0,L,G)+n,X=D.add(t,s,o,wt,ge,this.starLife+Math.random()*this.starLife*this.starLifeVariation);this.glitter&&(X.sparkFreq=a,X.sparkSpeed=l,X.sparkLife=i,X.sparkLifeVariation=u,X.sparkColor=this.glitterColor,X.sparkTimer=Math.random()*X.sparkFreq)})}else Y(this.starCount,b);else if(Array.isArray(this.color))if(Math.random()<.5){const n=Math.random()*Math.PI,I=n+Math.PI,M=Math.PI;o=this.color[0],Y(this.starCount,b,n,M),o=this.color[1],Y(this.starCount,b,I,M)}else o=this.color[0],Y(this.starCount/2,b),o=this.color[1],Y(this.starCount/2,b);else throw new Error("Invalid shell color. Expected string or array of strings, but got: "+this.color);this.pistil&&new _({spreadSize:this.spreadSize*.5,starLife:this.starLife*.6,starLifeVariation:this.starLifeVariation,starDensity:1.4,color:this.pistilColor,glitter:"light",glitterColor:this.pistilColor===C.Gold?C.Gold:C.White}).burst(t,s),this.streamers&&new _({spreadSize:this.spreadSize*.9,starLife:this.starLife*.8,starLifeVariation:this.starLifeVariation,starCount:Math.floor(Math.max(6,this.spreadSize/45)),color:C.White,glitter:"streamer"}).burst(t,s),K.add(t,s,this.spreadSize/4),this.comet&&(Math.random()<.5?p.burst1.play():p.burst2.play())}}const K={active:[],_pool:[],_new(){return{}},add(e,t,s){const r=this._pool.pop()||this._new();return r.x=e,r.y=t,r.radius=s,this.active.push(r),r},returnInstance(e){this._pool.push(e)}};function Pe(){const e={};return le.forEach(t=>{e[t]=[]}),e}const D={drawWidth:3,airDrag:.98,airDragHeavy:.992,active:Pe(),_pool:[],_new(){return{}},add(e,t,s,r,o,c,a,l){const i=this._pool.pop()||this._new();return i.visible=!0,i.heavy=!1,i.x=e,i.y=t,i.prevX=e,i.prevY=t,i.color=s,i.speedX=Math.sin(r)*o+(a||0),i.speedY=Math.cos(r)*o+(l||0),i.life=c,i.fullLife=c,i.spinAngle=Math.random()*R,i.spinSpeed=.8,i.spinRadius=0,i.sparkFreq=0,i.sparkSpeed=1,i.sparkTimer=0,i.sparkColor=s,i.sparkLife=750,i.sparkLifeVariation=.25,i.strobe=!1,this.active[s].push(i),i},returnInstance(e){e.onDeath&&e.onDeath(e),e.onDeath=null,e.secondColor=null,e.transitionTime=0,e.colorChanged=!1,this._pool.push(e)}},O={drawWidth:0,airDrag:.9,active:Pe(),_pool:[],_new(){return{}},add(e,t,s,r,o,c){const a=this._pool.pop()||this._new();return a.x=e,a.y=t,a.prevX=e,a.prevY=t,a.color=s,a.speedX=Math.sin(r)*o,a.speedY=Math.cos(r)*o,a.life=c,this.active[s].push(a),a},returnInstance(e){this._pool.push(e)}};$e()}),(S,g)=>(xt(),Mt("div",Kt,[Lt(Ft),Qt]))}}),sn=_t($t,[["__scopeId","data-v-2741c89d"]]);export{sn as default};
